<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>lab96_Ajax01</title>
</head>
<body>
<h2>Ajax01</h2>
<hr>
<a href="https://www.w3schools.com/Js/js_ajax_http.asp">Read</a><br>
	<script type="text/javascript">
		var xmlhttp;
		if (window.XMLHttpRequest) {
		    // code for modern browsers
		    xmlhttp = new XMLHttpRequest();
		    console.log("debug1");
		 } else {
		    // code for old IE browsers
		    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
		    console.log("debug2");
		 }
		
		if (xmlhttp == null) {
			console.log("Not support");
		} else {
			console.log("Support");
		}
		
		/*目前的ready state*/
		//	alert('now: ' + xmlhttp.readyState);
		
		xmlhttp.onreadystatechange = callBack2;
		
		/* function callBack() {
			var state = xmlhttp.readyState;
			var id1 = document.getElementById('id1');
			var id2 = document.getElementById('id2');
			var id3 = document.getElementById('id3');
			var id4 = document.getElementById('id4');
			
			switch (state) {
			case 1:
				id1.innerHTML = 'OK1';
				break;
			case 2:
				id2.innerHTML = 'OK2';
				break;
			case 3:
				id3.innerHTML = 'OK3';
				break;
			case 4:
				id4.innerHTML = 'OK4';
				break;
			}
		} */
		
		/* function callBack2() {
			var state = xmlhttp.readyState;
			var status = xmlhttp.status;
			if (status == 200 && state == 4) {
				console.log("OK AJAX");
				
				document.getElementById('title').innerHTML = xmlhttp.responseText;
				
			} else {
				console.log("Status: " +status);
			}
		} */
		
		function callBack2() {
			var state = xmlhttp.readyState;
			var status = xmlhttp.status;
			if (status == 200 && state == 4) {
				
			}
		}
		
		function test1() {
			xmlhttp.open('GET','ajax02.jsp',true);
			
			//	透過header夾帶資訊
			xmlhttp.setRequestHeader("user-agent","dh");
			xmlhttp.setRequestHeader("user-account","dh12345");
			
			xmlhttp.send();
		}
		
	</script>
	
	<button type="button" onclick="test1()">Test1</button><br>
	1: <span id='id1'></span><br>
	2: <span id='id2'></span><br>
	3: <span id='id3'></span><br>
	4: <span id='id4'></span><br>
	
	<hr>
	<div id="title"></div>
	<hr>
	<input type="text" id="x">
	+
	<input type="text" id="y">
	<input type="button" onclick="" value="">
	<span id="result"></span>
</body>
</html>